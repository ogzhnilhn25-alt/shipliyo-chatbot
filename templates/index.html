<!DOCTYPE html>
<html>
<head>
    <title>Shipliyo Chatbot</title>
    <style>
        .bubble { padding: 10px; margin: 5px; background: #007bff; color: white; border-radius: 20px; cursor: pointer; display: inline-block; }
        .chat-container { max-width: 400px; margin: 50px auto; padding: 20px; }
    </style>
</head>
<body>
    <div class="chat-container">
        <h2>Shipliyo Chatbot</h2>
        <div id="bubbles">
            <div class="bubble" onclick="sendMessage('get_code')">üì± Kod Al</div>
            <div class="bubble" onclick="sendMessage('help')">‚ùì Yardƒ±m</div>
        </div>
        <div id="response"></div>
    </div>

    <script>
        async function sendMessage(message) {
            const response = await fetch('/api/chatbot', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    message: message,
                    session_id: 'web_user',
                    language: 'tr'
                })
            });
            const data = await response.json();
            
            if (data.bubbles) {
                let bubblesHtml = '';
                data.bubbles.forEach(bubble => {
                    bubblesHtml += `<div class="bubble" onclick="sendMessage('${bubble.payload}')">${bubble.title}</div>`;
                });
                document.getElementById('bubbles').innerHTML = bubblesHtml;
            }
            
            document.getElementById('response').innerHTML = `<p>${data.response}</p>`;
        }
    </script>
</body>
</html>